### redis持久化-RDB(redis database)
所具备的持久化是使用文件快照的方式，可以在配置文件中配置快照持久化的策略，可以设置多个，这里要考虑具体的数据变化规律合性能的考虑(对磁盘文件的读写也较为费事)。有一点redis的文件快照持久化非增量持久化，也就是说每次进行快照都是全量数据。对于该种策略文件快照，在断电、宕机的情况下会丢失尚未进行快照的数据，在设置策略的时候需要考虑。
插入速度与每条记录大小关系不大，在进行save 60 10000策略插入1千万条数据与没有持久化策略插入1千万时间分别是 1小时50分钟、1小时20分钟
文件快照设置方式如下：
    save 900 1       在900秒内 如果有1条记录更新经行快照
    save 300 10      在300秒内 如果有10条记录更新经行快照
    save 60 10000    在60秒内 如果有10000条记录更新经行快照

### redis持久化-AOF(append only file)
增量请求文件：把内存中的数据序列化为操作请求，用于读取文件进行replay得到数据，序列化的操作包括SET、RPUSH、SADD、ZADD。


### redis存储

分为内存存储、磁盘存储和log文件三部分，配置文件中有三个参数对其进行配置。

save seconds updates，save配置，指出在多长时间内，有多少次更新操作，就将数据同步到数据文件。这个可以多个条件配合，比如默认配置文件中的设置，就设置了三个条件。

appendonly yes/no ，appendonly配置，指出是否在每次更新操作后进行日志记录，如果不开启，可能会在断电时导致一段时间内的数据丢失。因为redis本身同步数据 文件是按上面的save条件来同步的，所以有的数据会在一段时间内只存在于内存中。

appendfsync no/always/everysec ，appendfsync配置，no表示等操作系统进行数据缓存同步到磁盘，always表示每次更新操作后手动调用fsync()将数据写到磁盘，everysec表示每秒同步一次。
